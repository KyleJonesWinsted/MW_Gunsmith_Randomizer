(this["webpackJsonpgunsmith-frontend"]=this["webpackJsonpgunsmith-frontend"]||[]).push([[0],{10:function(t,e,n){t.exports=n(18)},15:function(t,e,n){},16:function(t,e,n){},18:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),s=n(9),c=n.n(s),u=(n(15),n(3)),o=n(4),i=n(6),l=n(5),m=n(7),h=(n(16),n(1)),g=n.n(h),p=n(2),b=function(t){function e(){return Object(u.a)(this,e),Object(i.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(o.a)(e,[{key:"render",value:function(){return r.a.createElement("div",{className:"attachment-row"},r.a.createElement("p",{className:"attachment-slot"},this.props.attachment.slot),r.a.createElement("p",{className:"attachment-name"},this.props.attachment.name))}}]),e}(a.Component),d=function(t){function e(t){var n;return Object(u.a)(this,e),(n=Object(i.a)(this,Object(l.a)(e).call(this,t))).state={gun_id:"",gun_name:"",gun_imgUrl:"",gun_rank:100,attachments:[]},n.getNewGun=n.getNewGun.bind(Object(p.a)(n)),n.getAttachments=n.getAttachments.bind(Object(p.a)(n)),n.rerollAttachments=n.rerollAttachments.bind(Object(p.a)(n)),n.attachmentsList=n.attachmentsList.bind(Object(p.a)(n)),n.onChangeGunRank=n.onChangeGunRank.bind(Object(p.a)(n)),n}return Object(m.a)(e,t),Object(o.a)(e,[{key:"getNewGun",value:function(){var t,e,n,a,r=arguments;return g.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:55,e="http://localhost:4000/gun/random/"+t,s.prev=2,s.next=5,g.a.awrap(fetch(e));case 5:if(!(n=s.sent).ok){s.next=11;break}return s.next=9,g.a.awrap(n.json());case 9:return a=s.sent,s.abrupt("return",Promise.resolve(a));case 11:throw new Error("Unable to get new gun");case 14:return s.prev=14,s.t0=s.catch(2),console.log(s.t0),s.abrupt("return",Promise.reject(s.t0));case 18:case"end":return s.stop()}}),null,null,[[2,14]])}},{key:"getAttachments",value:function(t){var e,n,a;return g.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(t){r.next=2;break}return r.abrupt("return");case 2:return e="http://localhost:4000/attachments/"+t+"/"+this.state.gun_rank,r.prev=3,r.next=6,g.a.awrap(fetch(e));case 6:if(!(n=r.sent).ok){r.next=13;break}return r.next=10,g.a.awrap(n.json());case 10:for(a=r.sent;a.length<5;)a.push({name:"-",gunId:"",rankUnlocked:100,imgUrl:"",slot:"-"});return r.abrupt("return",Promise.resolve(a));case 13:throw new Error("Unable to get attachments.");case 16:return r.prev=16,r.t0=r.catch(3),console.log(r.t0),r.abrupt("return",Promise.reject(r.t0));case 20:case"end":return r.stop()}}),null,this,[[3,16]])}},{key:"rerollAttachments",value:function(){var t;return g.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.awrap(this.getAttachments(this.state.gun_id));case 3:t=e.sent,this.setState({attachments:t}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),alert(e.t0);case 11:case"end":return e.stop()}}),null,this,[[0,7]])}},{key:"componentDidMount",value:function(){var t,e;return g.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,g.a.awrap(this.getNewGun());case 3:return t=n.sent,n.next=6,g.a.awrap(this.getAttachments(t._id));case 6:e=n.sent,this.setState({gun_id:t._id,gun_name:t.name,gun_imgUrl:t.imgUrl,gun_rank:100,attachments:e}),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(0),console.log(n.t0),alert(n.t0);case 14:case"end":return n.stop()}}),null,this,[[0,10]])}},{key:"attachmentsList",value:function(){return this.state.attachments.map((function(t,e){return r.a.createElement(b,{attachment:t,key:e})}))}},{key:"onChangeGunRank",value:function(t){this.setState({gun_rank:t.target.value})}},{key:"render",value:function(){return r.a.createElement("div",{className:"gunsmith"},r.a.createElement("h1",{className:"gunsmith-title"},this.state.gun_name," Gunsmith"),r.a.createElement("div",{className:"gunsmith-flex"},r.a.createElement("div",{className:"attachments"},r.a.createElement("div",null,this.attachmentsList())),r.a.createElement("div",{className:"gun"},r.a.createElement("div",{className:"gun-img-frame"},r.a.createElement("img",{className:"gun-img",src:this.state.gun_imgUrl,alt:this.state.gun_name}),r.a.createElement("h3",{className:"gun-title"},this.state.gun_name)),r.a.createElement("div",{className:"controls"},r.a.createElement("label",{htmlFor:"gunRank",id:"gun-rank-label"},"Gun Rank:"),r.a.createElement("input",{type:"number",name:"gunRank",id:"gun-rank-input",value:this.state.gun_rank,onChange:this.onChangeGunRank}),r.a.createElement("button",{id:"new-attachments-button",onClick:this.rerollAttachments},"New Attachments"),r.a.createElement("br",null),r.a.createElement("button",{id:"reroll-button",onClick:this.componentDidMount.bind(this)},"Reroll")))))}}]),e}(a.Component),v=function(t){function e(){return Object(u.a)(this,e),Object(i.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(o.a)(e,[{key:"render",value:function(){return r.a.createElement(d,null)}}]),e}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(v,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[10,1,2]]]);
//# sourceMappingURL=main.5c2b1697.chunk.js.map